<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>updPassword</title>
  <script src="js/jquery-3.3.1.min.js"></script>
  <script src="js/template-web.js"></script>
  <script src="js/zui.min.js"></script>
  <script src="lib/chart/zui.chart.min.js"></script>
  <script src="js/getUsername.js"></script>
  <link rel="stylesheet" href="css/zui.min.css">
</head>
<style type="text/css">
  .navbar {
    height: 100px;
    font-size: 20px;
  }

  #f1 {
    width: 650px;
    height: 350px;
    position: relative;
    left: 300px;
  }

  #f1 input {
    width: 500px;
  }

  #error {
    display: none;
    float: left;
  }
</style>
<script type="text/javascript">
  function _updatePass() {
    var oldPass = $("#oldPass").val();
    var newPass = $("#newPass").val();
    var newPass2 = $("#newPass2").val();
    if (newPass == newPass2) {
      $.ajax({
        type: "PUT",
        url: "/api/user/password",
        data: JSON.stringify({ newPassword: newPass, oldPassword: oldPass }),
        contentType: "application/json",
        success: function (data) {
          alert("修改密码成功！")
          window.location.href = "teacher.html"
        },
        error: function (data) {
          alert(JSON.stringify(data))
        }
      });
    } else {
      $("#error").show();
    }
  }
</script>

<body>
<nav class="navbar" role="navigation">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" style="font-size:30px" href="teacher.html">首页</a>
    </div>
    <div class="collapse navbar-collapse navbar-collapse-example">
      <ul class="nav navbar-nav">
        <li>
          <a href="updateUser.html">用户管理</a>
        </li>
        <li>
          <a href="questions.html">试题管理</a>
        </li>
        <li>
          <a href="paper.html">试卷管理</a>
        </li>
        <li>
          <a href="scores.html">学生成绩查询</a>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>教师</li>
        <li>
          <a data-toggle="dropdown" style="font-size:16px">
            <span id="username"></span>
            <b class="caret"></b>
          </a>
          <ul class="dropdown-menu">
            <li>
              <a href="#">个人信息</a>
            </li>
            <li>
              <a href="updPassword.html">修改密码</a>
            </li>
            <li>
              <a href="/auth/logout">退出</a>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>
  <form id="f1">
    <legend>修改我的密码</legend>
    <div class="form-group">
      <label for="exampleInputAccount3">原密码</label>
      <input type="password" class="form-control" id="oldPass" placeholder="原密码">
      <span></span>
    </div>
    <div class="form-group">
      <label for="exampleInputAccount3">新密码</label>
      <input type="password" class="form-control" id="newPass" placeholder="新密码">
    </div>
    <div class="form-group">
      <label for="exampleInputAccount3">确认密码</label>
      <input type="password" class="form-control" id="newPass2" placeholder="确认密码">
      <strong id="error" style="color:red;font-size:15px">两次输入密码不同</strong>
    </div>
    <div style="text-align:right">
      <button type="button" class="btn" onclick="javascript:_updatePass()">确认修改</button>
    </div>
  </form>
</body>

</html>